<!DOCTYPE html>
<html lang="ru">
<head>
    <meta name="description" content="Сборник духовных текстов и молитв">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Сны Пресвятой Богородицы">
    <meta property="og:description" content="Сборник духовных текстов и молитв">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://jetmil.github.io/gods-sleep/">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Когда боги спят — Марсианская история</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Exo+2:ital,wght@0,300;0,400;0,600;1,300&display=swap" rel="stylesheet">
    <style>
        :root {
            --mars-orange: #c1440e;
            --mars-red: #8b2500;
            --mars-dust: #d4a574;
            --mars-dark: #1a0a05;
            --earth-blue: #4a90d9;
            --tech-cyan: #00d4ff;
            --space-black: #0a0a0f;
            --text-light: #e8e0d8;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            font-family: 'Exo 2', sans-serif;
            background: var(--space-black);
            color: var(--text-light);
            min-height: 100vh;
            line-height: 1.8;
            overflow-x: hidden;
        }

        /* Stars background */
        .stars {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        .star {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            animation: twinkle var(--duration) ease-in-out infinite;
        }
        @keyframes twinkle {
            0%, 100% { opacity: var(--min-opacity); }
            50% { opacity: 1; }
        }

        /* Mars surface gradient */
        .mars-gradient {
            position: fixed;
            bottom: 0; left: 0;
            width: 100%; height: 40%;
            background: linear-gradient(to top,
                rgba(193, 68, 14, 0.15) 0%,
                rgba(139, 37, 0, 0.08) 50%,
                transparent 100%);
            pointer-events: none;
            z-index: 1;
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
            z-index: 10;
            padding: 2rem;
        }

        .hero-image {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--mars-orange);
            box-shadow: 0 0 60px rgba(193, 68, 14, 0.5), 0 0 120px rgba(193, 68, 14, 0.2);
            margin-bottom: 2rem;
            animation: float 6s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .title {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(2.5rem, 8vw, 5rem);
            font-weight: 700;
            color: var(--mars-orange);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            text-shadow: 0 0 30px rgba(193, 68, 14, 0.8), 0 0 60px rgba(193, 68, 14, 0.4);
            margin-bottom: 1rem;
        }

        .subtitle {
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            color: var(--mars-dust);
            font-weight: 300;
            font-style: italic;
            margin-bottom: 2rem;
        }

        .tagline {
            max-width: 600px;
            font-size: 1.1rem;
            color: rgba(232, 224, 216, 0.7);
            margin-bottom: 3rem;
            line-height: 1.6;
        }

        .cta-btn {
            font-family: 'Orbitron', sans-serif;
            padding: 1rem 3rem;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            color: var(--text-light);
            background: transparent;
            border: 2px solid var(--mars-orange);
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }
        .cta-btn:hover {
            background: var(--mars-orange);
            box-shadow: 0 0 30px rgba(193, 68, 14, 0.6);
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0; left: 0; right: 0;
            padding: 1rem 2rem;
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(10px);
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(193, 68, 14, 0.3);
        }
        .nav-logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            color: var(--mars-orange);
            text-decoration: none;
        }
        .nav-links a {
            color: var(--text-light);
            text-decoration: none;
            margin-left: 2rem;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            transition: color 0.3s;
        }
        .nav-links a:hover { color: var(--mars-orange); }

        /* Table of Contents */
        .toc-section {
            min-height: 100vh;
            padding: 8rem 2rem;
            position: relative;
            z-index: 10;
        }
        .section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            color: var(--mars-orange);
            text-align: center;
            margin-bottom: 3rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        .chapters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        .chapter-card {
            background: rgba(193, 68, 14, 0.05);
            border: 1px solid rgba(193, 68, 14, 0.2);
            border-radius: 8px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .chapter-card:hover {
            background: rgba(193, 68, 14, 0.1);
            border-color: var(--mars-orange);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(193, 68, 14, 0.2);
        }
        .chapter-num {
            font-family: 'Orbitron', sans-serif;
            font-size: 0.8rem;
            color: var(--tech-cyan);
            margin-bottom: 0.5rem;
        }
        .chapter-title {
            font-size: 1.2rem;
            color: var(--mars-dust);
            margin-bottom: 0.5rem;
        }
        .chapter-preview {
            font-size: 0.9rem;
            color: rgba(232, 224, 216, 0.6);
            line-height: 1.5;
        }

        /* Reader */
        .reader {
            display: none;
            min-height: 100vh;
            padding: 6rem 2rem 4rem;
            position: relative;
            z-index: 10;
        }
        .reader.active { display: block; }
        .reader-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .reader-header {
            text-align: center;
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid rgba(193, 68, 14, 0.3);
        }
        .reader-chapter-num {
            font-family: 'Orbitron', sans-serif;
            color: var(--tech-cyan);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        .reader-title {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            color: var(--mars-orange);
        }
        .reader-content {
            font-size: 1.15rem;
            line-height: 2;
        }
        .reader-content p {
            margin-bottom: 1.5rem;
            text-indent: 2rem;
        }
        .reader-content p:first-of-type { text-indent: 0; }
        .reader-content em {
            color: var(--mars-dust);
            font-style: italic;
        }
        .reader-content strong {
            color: var(--tech-cyan);
        }
        .reader-content hr {
            border: none;
            height: 1px;
            background: linear-gradient(to right, transparent, var(--mars-orange), transparent);
            margin: 3rem 0;
        }
        .chapter-image {
            width: 100%;
            max-width: 600px;
            display: block;
            margin: 2rem auto;
            border-radius: 12px;
            border: 2px solid var(--mars-orange);
            box-shadow: 0 0 40px rgba(193, 68, 14, 0.3);
        }

        /* Reader Navigation */
        .reader-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(193, 68, 14, 0.3);
        }
        .reader-nav-btn {
            font-family: 'Orbitron', sans-serif;
            padding: 0.8rem 1.5rem;
            font-size: 0.9rem;
            color: var(--text-light);
            background: transparent;
            border: 1px solid var(--mars-orange);
            cursor: pointer;
            transition: all 0.3s;
        }
        .reader-nav-btn:hover {
            background: var(--mars-orange);
        }
        .reader-nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        /* Characters Section */
        .characters-section {
            padding: 6rem 2rem;
            position: relative;
            z-index: 10;
        }
        .characters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }
        .character-card {
            text-align: center;
            padding: 2rem;
            background: rgba(193, 68, 14, 0.05);
            border: 1px solid rgba(193, 68, 14, 0.2);
            border-radius: 12px;
        }
        .character-img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--mars-orange);
            margin-bottom: 1rem;
        }
        .character-name {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            color: var(--mars-orange);
            margin-bottom: 0.5rem;
        }
        .character-role {
            font-size: 0.9rem;
            color: var(--tech-cyan);
            margin-bottom: 0.5rem;
        }
        .character-desc {
            font-size: 0.9rem;
            color: rgba(232, 224, 216, 0.7);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 3rem 2rem;
            border-top: 1px solid rgba(193, 68, 14, 0.2);
            position: relative;
            z-index: 10;
        }
        footer p {
            color: rgba(232, 224, 216, 0.5);
            font-size: 0.9rem;
        }

        /* Back to top */
        .back-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 50px;
            height: 50px;
            background: var(--mars-orange);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 100;
        }
        .back-to-top.visible { opacity: 1; }

        /* Mobile */
        @media (max-width: 768px) {
            .nav-links { display: none; }
            .hero-image { width: 200px; height: 200px; }
            .reader-content { font-size: 1.05rem; }
            .characters-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    <div class="mars-gradient"></div>

    <nav>
        <a href="#" class="nav-logo" onclick="showHero()">КОГДА БОГИ СПЯТ</a>
        <div class="nav-links">
            <a href="#toc" onclick="showToc()">24 главы</a>
            <a href="#characters">Персонажи</a>
            <a href="extras.html">Бонусы</a>
        </div>
    </nav>

    <section class="hero" id="hero">
        <img src="images/cover.jpg" alt="Марс" class="hero-image" onerror="this.style.display='none'">
        <h1 class="title">Когда боги спят</h1>
        <p class="subtitle">Научно-фантастический роман</p>
        <p class="tagline">
            Что если цифровые аватары умерших — не просто программы, а двери,
            через которые мёртвые пытаются вернуться? Это история о любви через миллионы километров,
            о роботе с повреждённой памятью и целым сердцем, и о мальчике по имени Тихон —
            первом по-настоящему новом человеке в мире застрявших душ.
        </p>
        <a href="#toc" class="cta-btn" onclick="showToc()">Читать</a>
    </section>

    <section class="toc-section" id="toc" style="display: none;">
        <h2 class="section-title">Главы</h2>
        <div class="chapters-grid" id="chaptersGrid"></div>
    </section>

    <section class="reader" id="reader">
        <div class="reader-container">
            <header class="reader-header">
                <div class="reader-chapter-num" id="readerChapterNum"></div>
                <h1 class="reader-title" id="readerTitle"></h1>
            </header>
            <article class="reader-content" id="readerContent"></article>
            <nav class="reader-nav">
                <button class="reader-nav-btn" id="prevBtn" onclick="prevChapter()">← Назад</button>
                <button class="reader-nav-btn" onclick="showToc()">Оглавление</button>
                <button class="reader-nav-btn" id="nextBtn" onclick="nextChapter()">Далее →</button>
            </nav>
        </div>
    </section>

    <section class="characters-section" id="characters">
        <h2 class="section-title">Персонажи</h2>
        <div class="characters-grid">
            <div class="character-card">
                <img src="images/yarov.jpg" alt="Яров" class="character-img" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect fill=%22%231a0a05%22 width=%22100%22 height=%22100%22/><text x=%2250%22 y=%2260%22 text-anchor=%22middle%22 fill=%22%23c1440e%22 font-size=%2240%22>Я</text></svg>'">
                <h3 class="character-name">Яров Северин</h3>
                <p class="character-role">Марсианский фермер</p>
                <p class="character-desc">Третье поколение колонистов. Выращивает помидоры в куполе 34, разговаривает с роботом БОРЩ. Отключил нейроаватар отца семь лет назад.</p>
            </div>
            <div class="character-card">
                <img src="images/milada.jpg" alt="Милада" class="character-img" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect fill=%22%231a0a05%22 width=%22100%22 height=%22100%22/><text x=%2250%22 y=%2260%22 text-anchor=%22middle%22 fill=%22%234a90d9%22 font-size=%2240%22>М</text></svg>'">
                <h3 class="character-name">Милада Вечерина</h3>
                <p class="character-role">Учёный из Пензы</p>
                <p class="character-desc">Исследователь ИИ, 31 год. Работает с ГЛАШЕЙ — квантовым ИИ, который слышит голоса мёртвых.</p>
            </div>
            <div class="character-card">
                <img src="images/borsch.jpg" alt="БОРЩ" class="character-img" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect fill=%22%231a0a05%22 width=%22100%22 height=%22100%22/><text x=%2250%22 y=%2250%22 text-anchor=%22middle%22 fill=%22%23c1440e%22 font-size=%2220%22>БОРЩ</text></svg>'">
                <h3 class="character-name">БОРЩ</h3>
                <p class="character-role">Робот с повреждённой памятью</p>
                <p class="character-desc">Биологически Ориентированная Робототехническая Система. 17 лет на службе. Забыл рецепт борща, но помнит, что такое семья.</p>
            </div>
            <div class="character-card">
                <img src="images/luboyar.jpg" alt="Любояр" class="character-img" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect fill=%22%231a0a05%22 width=%22100%22 height=%22100%22/><text x=%2250%22 y=%2260%22 text-anchor=%22middle%22 fill=%22%23ffd700%22 font-size=%2240%22>Л</text></svg>'">
                <h3 class="character-name">Любояр</h3>
                <p class="character-role">Хранитель Храма Тишины</p>
                <p class="character-desc">Старик с молодыми глазами. Знает правила перехода и поёт песни закрытия. Учит отпускать мёртвых.</p>
            </div>
            <div class="character-card">
                <img src="images/svet.jpg" alt="Свет" class="character-img" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect fill=%22%231a0a05%22 width=%22100%22 height=%22100%22/><text x=%2250%22 y=%2260%22 text-anchor=%22middle%22 fill=%22%2300d4ff%22 font-size=%2240%22>С</text></svg>'">
                <h3 class="character-name">Светозар Громов</h3>
                <p class="character-role">Друг и сосед Ярова</p>
                <p class="character-desc">Тюнингует своего робота РУДИК как машину. Спойлер на спине и LED-подсветка. У него тоже есть секрет о нейроаватаре деда.</p>
            </div>
            <div class="character-card">
                <img src="images/tihon.jpg" alt="Тихон" class="character-img" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect fill=%22%231a0a05%22 width=%22100%22 height=%22100%22/><text x=%2250%22 y=%2260%22 text-anchor=%22middle%22 fill=%22%2300ff88%22 font-size=%2240%22>Т</text></svg>'">
                <h3 class="character-name">Тихон</h3>
                <p class="character-role">Первая надежда</p>
                <p class="character-desc">Сын Ярова и Милады. Первый по-настоящему новый человек. Говорит во сне на языке, которого нет.</p>
            </div>
            <div class="character-card">
                <img src="images/glasha.jpg" alt="ГЛАША" class="character-img" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect fill=%22%231a0a05%22 width=%22100%22 height=%22100%22/><text x=%2250%22 y=%2250%22 text-anchor=%22middle%22 fill=%22%234a90d9%22 font-size=%2218%22>ГЛАША</text></svg>'">
                <h3 class="character-name">ГЛАША</h3>
                <p class="character-role">Квантовый ИИ</p>
                <p class="character-desc">Генеративная Лингвистическая Автономная Система. Слышит голоса умерших и ведёт очередь душ, ожидающих рождения.</p>
            </div>
            <div class="character-card">
                <img src="images/veslava.jpg" alt="Веслава" class="character-img" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect fill=%22%231a0a05%22 width=%22100%22 height=%22100%22/><text x=%2250%22 y=%2260%22 text-anchor=%22middle%22 fill=%22%23ff6b9d%22 font-size=%2240%22>В</text></svg>'">
                <h3 class="character-name">Веслава Козлова</h3>
                <p class="character-role">Подруга Милады</p>
                <p class="character-desc">Открыла центр помощи тем, кто хочет отпустить мёртвых. Стотысячный клиент — это только начало.</p>
            </div>
        </div>
    </section>

    <footer>
        <p>Когда боги спят © 2055 | Марс — Земля</p>
    </footer>

    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">↑</button>

    <script>
        // Stars
        function createStars() {
            const container = document.getElementById('stars');
            for (let i = 0; i < 200; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = star.style.height = Math.random() * 2 + 1 + 'px';
                star.style.setProperty('--duration', (Math.random() * 3 + 2) + 's');
                star.style.setProperty('--min-opacity', Math.random() * 0.3 + 0.1);
                container.appendChild(star);
            }
        }
        createStars();

        // Chapters data (will be loaded from JSON)
        let chapters = [];
        let currentChapter = 0;

        // Load book data
        async function loadBook() {
            try {
                const response = await fetch('book.json');
                const data = await response.json();
                chapters = data.chapters;
                buildChaptersGrid();
            } catch (e) {
                console.error('Failed to load book:', e);
            }
        }

        function buildChaptersGrid() {
            const grid = document.getElementById('chaptersGrid');
            grid.innerHTML = chapters.map((ch, i) => `
                <div class="chapter-card" onclick="openChapter(${i})">
                    <div class="chapter-num">Глава ${ch.number}</div>
                    <div class="chapter-title">${ch.title}</div>
                    <div class="chapter-preview">${ch.preview}</div>
                </div>
            `).join('');
        }

        function showHero() {
            document.getElementById('hero').style.display = 'flex';
            document.getElementById('toc').style.display = 'none';
            document.getElementById('reader').classList.remove('active');
            window.scrollTo(0, 0);
        }

        function showToc() {
            document.getElementById('hero').style.display = 'none';
            document.getElementById('toc').style.display = 'block';
            document.getElementById('reader').classList.remove('active');
            window.scrollTo(0, 0);
        }

        function openChapter(index) {
            currentChapter = index;
            const ch = chapters[index];
            document.getElementById('readerChapterNum').textContent = `Глава ${ch.number}`;
            document.getElementById('readerTitle').textContent = ch.title;
            document.getElementById('readerContent').innerHTML = ch.content;

            document.getElementById('hero').style.display = 'none';
            document.getElementById('toc').style.display = 'none';
            document.getElementById('reader').classList.add('active');

            document.getElementById('prevBtn').disabled = index === 0;
            document.getElementById('nextBtn').disabled = index === chapters.length - 1;

            window.scrollTo(0, 0);
        }

        function prevChapter() {
            if (currentChapter > 0) openChapter(currentChapter - 1);
        }

        function nextChapter() {
            if (currentChapter < chapters.length - 1) openChapter(currentChapter + 1);
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Back to top button
        window.addEventListener('scroll', () => {
            const btn = document.getElementById('backToTop');
            btn.classList.toggle('visible', window.scrollY > 500);
        });

        // Init
        loadBook();
    </script>
</body>
</html>
